


Activity Streams Working Group                                  J. Snell
                                                                     IBM
                                                            May 29, 2013


                    Draft: JSON Activity Streams 2.0

Abstract

   This specification details a model for representing potential and
   completed activities using the JSON format.

Author's Note

   This draft is heavily influenced by the original JSON Activity
   Streams 1.0 specification that was originally co-authored by Martin
   Atkins, Will Norris, Chris Messina, Monica Wilkinson, Rob Dolin and
   James Snell.  The author is very thankful for their significant
   contributions and gladly stands on their shoulders.
































Snell                                                           [Page 1]

                             ActivityStreams                    May 2013


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1.  Relationship to JSON Activity Streams 1.0  . . . . . . . .  3
     1.2.  Relationship to JSON-LD 1.0  . . . . . . . . . . . . . . .  3
     1.3.  Syntax Conventions . . . . . . . . . . . . . . . . . . . .  4
   2.  Example Activities . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Object Model . . . . . . . . . . . . . . . . . . . . . . . . .  6
     3.1.  Object . . . . . . . . . . . . . . . . . . . . . . . . . .  6
     3.2.  Natural Language Values  . . . . . . . . . . . . . . . . .  7
     3.3.  Link Values  . . . . . . . . . . . . . . . . . . . . . . .  8
     3.4.  Activity . . . . . . . . . . . . . . . . . . . . . . . . . 10
       3.4.1.  Considerations on the use of "priority"  . . . . . . . 12
     3.5.  Additional Object Properties . . . . . . . . . . . . . . . 12
     3.6.  Collection . . . . . . . . . . . . . . . . . . . . . . . . 15
   4.  The Activity Stream JSON Document  . . . . . . . . . . . . . . 17
   5.  Comparison of Identifier Values  . . . . . . . . . . . . . . . 18
   6.  Extensibility  . . . . . . . . . . . . . . . . . . . . . . . . 18
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . . 18
   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 19
   9.  License  . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
   10. References . . . . . . . . . . . . . . . . . . . . . . . . . . 20
     10.1. Normative References . . . . . . . . . . . . . . . . . . . 20
     10.2. Informational References . . . . . . . . . . . . . . . . . 20
   Appendix A.  Acknowledgements  . . . . . . . . . . . . . . . . . . 20
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 21

























Snell                                                           [Page 2]

                             ActivityStreams                    May 2013


1.  Introduction

   In the most basic sense, an "activity" is a semantic description of
   either a potential or completed action.  In the former case,
   activities express what can be done with any particular object, while
   in the latter case, they express what has already been done.

   It is the goal of this specification to provide a JSON-based syntax
   that is sufficient to express metadata about activities in a rich,
   human-friendly, machine-processable and extensible manner.  This may
   include constructing natural-language descriptions about the
   activity, visual representations about he activity, associating
   actionable information with various types of objects, communicating
   or recording activity logs, or delegation of potential actions to
   other applications.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

1.1.  Relationship to JSON Activity Streams 1.0

   The JSON Activity Streams 1.0 specification was published in May of
   2011 and provided a baseline extensible syntax for the expression of
   completed activities.  This specification builds upon that initial
   foundation by incorporating lessons learned through extensive
   implementation, community feedback and related work being performed
   in other standards development communities.

   While the syntax defined by this specification diverges somewhat from
   that defined by JSON Activity Streams 1.0, the verbs, objectTypes,
   extensions and fundamental model defined by that original
   specification remain intact.

1.2.  Relationship to JSON-LD 1.0

   The JSON-based Serialization for  Linked Data (JSON-LD)
   [W3C.WD-json-ld-20130411] describes a rich syntax for the
   serialization of semantically-rich metadata using the JSON format.
   While the updated Activity Streams representation provided by this
   document is not defined as a "JSON-LD Vocabulary", the syntax is
   designed to be closely compatible with JSON-LD such that
   implementations can utilize both with minimal conflict or confusion.

   Most significantly, the JSON Activity Streams 2.0 syntax directly
   leverages the "@id", "@type", and "@language" properties defined by
   JSON-LD.




Snell                                                           [Page 3]

                             ActivityStreams                    May 2013


   There are a few differences between JSON-LD and the serialization
   syntax described here, specifically:

   o  While JSON-LD allows using relative IRI references in the values
      of @id properties, this specification limits @id properties to
      absolute IRIs.

   o  While it is possible to derive a JSON-LD "context" description for
      the Activity Streams 2.0 JSON syntax one is not normatively
      provided.

1.3.  Syntax Conventions

   This specification defines a JSON-based [RFC4627] serialization
   syntax.

   When serialized, absent properties are represented either by setting
   the property value to null or by omitting the property declaration
   altogether at the option of the publisher; these representations are
   semantically equivalent.  If a property has an array value, the
   absence of any items in that array MUST be represented by omitting
   the property entirely or by setting the value to null.

   This specification uses IRIs [RFC3987].  Every URI [RFC3986] is also
   an IRI, so a URI may be used wherever below an IRI is named.  There
   are two special considerations: (1) when an IRI that is not also a
   URI is given for dereferencing, it MUST be mapped to a URI using the
   steps in Section 3.1 of [RFC3987] and (2) when an IRI is serving as
   an "@id" value, it MUST NOT be so mapped.

   Unless otherwise specified, all properties with date and time values
   MUST conform to the "date-time" production in [RFC3339], with an
   uppercase "T" character used to separate date and time, and an
   uppercase "Z" character in the absence of a numeric time zone offset.
   All such timestamps SHOULD be represented relative to Coordinated
   Universal Time (UTC).


2.  Example Activities

   Following is a simple example of an activity:










Snell                                                           [Page 4]

                             ActivityStreams                    May 2013


     {
       "@type": "post",
       "published": "2011-02-10T15:04:55Z",
       "actor": {
         "@type": "person",
         "@id": "urn:example:person:martin",
         "name": "Martin Smith",
         "url": "http://example.org/martin",
         "image": {
           "@id": "http://example.org/martin/image",
           "width": 250,
           "height": 250
         }
       },
       "object" : {
         "@id": "urn:example:blog:abc123/xyz"
         "url": "http://example.org/blog/2011/02/entry"
       },
       "target" : {
         "@type": "blog",
         "@id": "urn:example:blog:abc123",
         "name": "Martin's Blog",
         "url": "http://example.org/blog/"
       }
     }

   A more extensive, single-entry "Activity Stream" follows.  In
   addition to containing a number of required and optional core
   properties, the example contains the additional, undefined extension
   properties "foo" and "foo2" for illustrative purposes only.

    {
      "items" : [
        {
          "@type": "post",
          "@language": "en",
          "published": "2011-02-10T15:04:55Z",
          "foo": "some extension property",
          "generator": "http://example.org/activities-app",
          "provider": "http://example.org/activity-stream",
          "title": {
            "en": "Martin posted a new video to his album.",
            "ga": "Martin phost le fisean nua a albam."
          },
          "actor": {
            "@type": "person",
            "@id": "urn:example:person:martin",
            "name": "Martin Smith",



Snell                                                           [Page 5]

                             ActivityStreams                    May 2013


            "url": "http://example.org/martin",
            "foo2": "some other extension property",
            "image": {
              "@id": "http://example.org/martin/image",
              "width": 250,
              "height": 250
            }
          },
          "object" : {
            "@type": "photo",
            "@id": "urn:example:album:abc123/my_fluffy_cat",
            "url": "http://example.org/album/my_fluffy_cat.jpg",
            "image": {
              "@id": "http://example.org/album/my_fluffy_cat_thumb.jpg",
              "width": 250,
              "height": 250
            }
          },
          "target": {
            "url": "http://example.org/album/",
            "@type": "photo-album",
            "@id": "urn:example.org:album:abc123",
            "name": {
              "en": "Martin's Photo Album",
              "ga": "Grianghraif Mairtin"
            },
            "image": {
              "@id": "http://example.org/album/thumbnail.jpg",
              "width": 250,
              "height": 250
            }
          }
        }
      ]
    }


3.  Object Model

3.1.  Object

   The following "core properties" apply to all JSON objects serialized
   within an Activity Stream document.








Snell                                                           [Page 6]

                             ActivityStreams                    May 2013


   +-----------+---------------+---------------------------------------+
   | Property  | Value         | Description                           |
   +-----------+---------------+---------------------------------------+
   | @id       | IRI           | Provides a permanent, universally     |
   |           |               | unique identifier for the object in   |
   |           |               | the form of an absolute IRI           |
   |           |               | [RFC3987].  Objects SHOULD contain a  |
   |           |               | single "@id" property.  If an object  |
   |           |               | does not contain an "id" property,    |
   |           |               | consumers MAY use the value of the    |
   |           |               | "url" property as a less-reliable,    |
   |           |               | non-unique identifier.                |
   | @type     | IRI           | Identifies the type of object.  An    |
   |           |               | object MAY contain a "@type" property |
   |           |               | whose value matches either the        |
   |           |               | "isegment-nz-nc" or the "IRI"         |
   |           |               | production in [RFC3987].  The use of  |
   |           |               | a relative references other than a    |
   |           |               | simple name is not allowed.  If no    |
   |           |               | "@type" property is specified, the    |
   |           |               | object has no specific type.          |
   | @language | [RFC5646]     | Identifies the language for all       |
   |           | Language Tag  | human-readable, natural-language      |
   |           |               | metadata values included in the       |
   |           |               | object.  An object MAY contain a      |
   |           |               | "@language" property.                 |
   | name      | Natural       | A natural-language, human-readable,   |
   |           | Language      | plain-text name for the object.  HTML |
   |           | value         | markup MUST NOT be included.  An      |
   |           | (Section 3.2) | object MAY contain a "name" property. |
   |           |               | If the object does not specify a      |
   |           |               | "@type" property, the object SHOULD   |
   |           |               | specify a "name".                     |
   | url       | Link          | A Link (Section 3.3) value describing |
   |           |               | a resource that provides a visual     |
   |           |               | representation of the object.  An     |
   |           |               | object MAY contain a "url" property.  |
   +-----------+---------------+---------------------------------------+

3.2.  Natural Language Values

   Natural Language values represent human-readable character sequences
   in one or more languages.  They are expressed as either: (1) a single
   JSON string or (2) a JSON dictionary mapping [RFC5646] Language tags
   to localized, equivalent translations of the same string value.

   For instance, the "name" property in all objects is a Natural
   Language value.  This means that the "name" can be expressed in one



Snell                                                           [Page 7]

                             ActivityStreams                    May 2013


   or more languages:

   A single String value using the default language:

     {
       "@language": "en",
       "name": "This is the name"
     }

   Multiple, language-specific values:

     {
       "name": {
         "en": "This is the name",
         "fr": "C'est le nom",
         "sp": "Este es el nombre"
     }

   Each key in the JSON dictionary MUST be an [RFC5646] Language Tag.
   The associated values MUST be Strings.

3.3.  Link Values

   Link values represent references to other objects and resources.
   They are expressed as either: (1) a String containing an absolute or
   relative IRI, (2) an Object (Section 3.1), or (3) a JSON Array
   containing a mixture of IRIs or Objects (Section 3.1).  Link values
   are closely related to the conceptual model of Links as established
   in [RFC5988], but have a serialization that is compatible with the
   JSON-serialization for Linked Data.

   For instance, as defined in previously, all objects (Section 3.1) can
   contain an "image" property whose value describes a graphical
   representation of the containing object.  This property will
   typically be used to provide the URL to a JPEG, GIF or PNG type
   resource that can be displayed to the user.  Any given object might
   have multiple such visual representations -- multiple screenshots,
   for instance, or the same image at different resolutions.  Based on
   the JSON-LD approach, there are essentially three ways of describing
   these references.











Snell                                                           [Page 8]

                             ActivityStreams                    May 2013


   To reference a single image without any additional metadata, the link
   value can be expressed as a simple JSON string containing an absolute
   or relative IRI:

     {
       "@type": "application",
       "@id": "http://example.org/application/123",
       "name": "My Application",
       "image": "http://example.org/application/123.png"
     }

   Alternatively, if additional metadata is required, the link can be
   expressed as an object that uses the @id or url property:

     {
       "@type": "application",
       "@id": "http://example.org/application/123",
       "name": "My Application",
       "image": {
         "@id": "http://example.org/application/123.png",
         "mediaType": "image/png",
         "height": 320,
         "width": 320
       }
     }

   If more than one link value is to be expressed, A JSON Array with a
   mix of string and object elements can be used:

     {
       "@type": "application",
       "@id": "http://example.org/application/123",
       "name": "My Application",
       "image": [
         "http://example.org/application/abc.gif",
         {
           "@id": "http://example.org/application/123.png",
           "mediaType": "image/png",
           "height": 320,
           "width": 320
         }
       ]
     }

   Individual items contained in such an array value are independent of
   the others and no significance is given to the order of items in the
   array.




Snell                                                           [Page 9]

                             ActivityStreams                    May 2013


   RFC 5988 defines that all Links have a "link relation" that describes
   the contextual purpose of the link.  Within an Activity Streams
   document, in the absence of a specific "rel" property within the link
   itself, the name of the property whose value is a link serves as the
   "link relation".  Any legal link relation value, as defined by RFC
   5988, can be used as a property with a link value in any Activity
   Streams object, except where the link relation might conflict with
   any other property defined by this specification.

   When an object (Section 3.1) is used to represent a Link value, the
   following additional properties MAY be used:

   +-------------+---------------+-------------------------------------+
   | Property    | Value         | Description                         |
   +-------------+---------------+-------------------------------------+
   | "rel"       | RFC 5988 Link | The RFC 5988 Link Relation          |
   |             | Relation      | associated with this link value.    |
   |             |               | If absent, the name of the property |
   |             |               | is assumed to specify the link      |
   |             |               | relation.                           |
   | "mediaType" | MIME Media    | The MIME media type of the resource |
   |             | Type          | being referenced.                   |
   +-------------+---------------+-------------------------------------+

3.4.  Activity

   Activity objects are specializations of the base Object (Section 3.1)
   type that provide metadata about potential or completed actions.

   Within an Activity object, the "@type" property is used to identify
   the type of activity.  Formerly, in JSON Activity Streams version
   1.0, this was represented using the "verb" property.  All existing
   verb definitions used in JSON Activity Streams 1.0 implementations
   can continue to be used as values of the "@type" property and retain
   their existing semantics.

   Activity objects extend the core object (Section 3.1) definition with
   the following additional, optional properties:













Snell                                                          [Page 10]

                             ActivityStreams                    May 2013


   +------------+---------------+--------------------------------------+
   | Property   | Value         | Description                          |
   +------------+---------------+--------------------------------------+
   | "actor"    | Link          | Describes the entity that either     |
   |            | (Section 3.3) | peformed or is expected to perform   |
   |            | value         | the Activity.                        |
   | "object"   | Link          | Describes the primary object of the  |
   |            | (Section 3.3) | activity.  For instance, in the      |
   |            | value         | activity, "John saved a movie to his |
   |            |               | wishlist", the object of the         |
   |            |               | activity is "movie".  An activity    |
   |            |               | SHOULD contain an "object" property. |
   |            |               | If the "object" property is not      |
   |            |               | contained, the primary object of the |
   |            |               | activity MAY be implied by context.  |
   | "target"   | Link          | Describes the target of the          |
   |            | (Section 3.3) | activity.  The precise meaning of    |
   |            | value         | the activity's target is dependent   |
   |            |               | on the activities "verb", but will   |
   |            |               | often be the object the English      |
   |            |               | preposition "to".  For instance, in  |
   |            |               | the activity, "John saved a movie to |
   |            |               | his wishlist", the target of the     |
   |            |               | activity is "wishlist".  The         |
   |            |               | activity target MUST NOT be used to  |
   |            |               | identity an indirect object that is  |
   |            |               | not a target of the activity.        |
   | "result"   | Link          | Describes the result of the          |
   |            | (Section 3.3) | activity.  For instance, if a        |
   |            | value         | particular action results in the     |
   |            |               | creation of a new resource, the      |
   |            |               | "result" property can be used to     |
   |            |               | describe that new resource.          |
   | "context"  | Link          | The "context" property allows the    |
   |            | (Section 3.3) | Activity to further include          |
   |            | value         | information about why a particular   |
   |            |               | action occurred by providing details |
   |            |               | about the context within which a     |
   |            |               | particular action was performed.     |
   |            |               | The value of the context property is |
   |            |               | Link (Section 3.3) value.            |
   | "status"   | String        | A string value indicating the        |
   |            |               | current status of the activity.  The |
   |            |               | value MUST be one of: "tentative",   |
   |            |               | "pending", "completed", or           |
   |            |               | "canceled".                          |





Snell                                                          [Page 11]

                             ActivityStreams                    May 2013


   | "priority" | Decimal       | An indicator of the relative         |
   |            | Number        | priority or importance that the      |
   |            | between 0.00  | creator of an Activity object        |
   |            | and 1.00      | considers the object to have.        |
   |            |               | Represented as a numeric decimal     |
   |            |               | between 0.00 and 1.00, with two      |
   |            |               | decimal places of precision.  If the |
   |            |               | property is omitted, or expicitly    |
   |            |               | set to null, the assumption is that  |
   |            |               | no explicit priority or importance   |
   |            |               | can be assumed.  All other values    |
   |            |               | falling between 0.00 and 1.00        |
   |            |               | indicate increasing priority.        |
   +------------+---------------+--------------------------------------+

3.4.1.  Considerations on the use of "priority"

   The presence of the "priority" property does not impose any specific
   processing or display requirements on the part of any entity
   consuming the activity.

   Expressing the value as a range of numeric decimal values is intended
   to provide the greatest level of flexibility in the expression and
   consumption of prioritization detail.  It is expected that
   implementors consuming activity objects containing "priority" will
   utilize and expose the additional information in a number of
   different ways depending on the unique requirements of each
   application use case.

   Many existing systems do not typically represent priority values as
   numeric ranges.  Such systems typically use fixed, labeled brackets
   such as "low", "normal" and "high" or "urgent".  Similar mechanisms
   can be established, by convention, when using the "priority"
   property.  In typical use, it is RECOMMENDED that implementations
   wishing to work with such defined categories treat "priority"
   property values in the range 0.00 to 0.25 as "low" priority; values
   greater than 0.25 to 0.75 as "normal" priority; and values greater
   than 0.75 to 1.00 as "high" priority.  Specific implementations are
   free to establish alternative conventions for the grouping of
   priority values with the caveat that such conventions likely will not
   be understood by all implementations.

3.5.  Additional Object Properties

   The following "additional properties" MAY be used with any JSON
   Object serialized within an Activity Stream document.





Snell                                                          [Page 12]

                             ActivityStreams                    May 2013


   +--------------+---------------+------------------------------------+
   | Property     | Value         | Description                        |
   +--------------+---------------+------------------------------------+
   | "attachment" | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing one or more objects    |
   |              | value         | associated with the containing     |
   |              |               | object.  These are similiar in     |
   |              |               | concept to files attached to an    |
   |              |               | email message.                     |
   | "author"     | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing one or more entity     |
   |              | value         | that created or authored the       |
   |              |               | object.                            |
   | "content"    | Natural       | A Natural-language description of  |
   |              | Language      | the object encoded as a single     |
   |              | value         | JSON String containing HTML        |
   |              | (Section 3.2) | markup.  Visual elements such as   |
   |              |               | thumbnail images MAY be included.  |
   | "duplicate"  | Link          | A Link (Section 3.3)value          |
   |              | (Section 3.3) | referencing one or more objects    |
   |              | value         | that are semantically equivalent   |
   |              |               | to this object or duplicate this   |
   |              |               | objects content.  An object SHOULD |
   |              |               | contain a "duplicate" property     |
   |              |               | when there are known objects,      |
   |              |               | possibly in a different system,    |
   |              |               | that are semantically equivalent   |
   |              |               | or duplicate the content.          |
   | "icon"       | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing one or more visual,    |
   |              | value         | graphic representations of the     |
   |              |               | object, intended for human         |
   |              |               | consumption.  The visual element   |
   |              |               | SHOULD have an aspect ratio of one |
   |              |               | (horizontal) to one (vertical) and |
   |              |               | SHOULD be suitable for             |
   |              |               | presentation at a small size.      |
   | "image"      | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing one or more visual,    |
   |              | value         | graphic represenations of the      |
   |              |               | object.  Unlike the "icon"         |
   |              |               | property, there are no aspect      |
   |              |               | ratio or display restrictions.     |
   | "location"   | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | describing one or more physical or |
   |              | value         | virtual locations associated with  |
   |              |               | which the object.                  |




Snell                                                          [Page 13]

                             ActivityStreams                    May 2013


   | "published"  | [RFC3339]     | The date and time at which the     |
   |              | date-time     | object was published.              |
   | "generator"  | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing the application that   |
   |              | value         | generated the object.              |
   | "provider"   | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing the application that   |
   |              | value         | published the object.  Note that   |
   |              |               | this is not necessarily the same   |
   |              |               | entity that generated the object.  |
   | "source"     | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing the original source of |
   |              | value         | this object.  The source property  |
   |              |               | is closely related to the          |
   |              |               | generator and provider properties  |
   |              |               | but serves the distinct purpose of |
   |              |               | identifying where the object was   |
   |              |               | originally published as opposed to |
   |              |               | identifying the applications that  |
   |              |               | generated or published it.         |
   | "summary"    | Natural       | A Natural-language summarization   |
   |              | Language      | of the object encoded as a single  |
   |              | value         | JSON String containing HTML        |
   |              | (Section 3.2) | markup.  Visual elements such as   |
   |              |               | thumbnail images can be included.  |
   | "updated"    | [RFC3339]     | The date and time at which a       |
   |              | date-time     | previously published object has    |
   |              |               | been modified.                     |
   | "startTime"  | [RFC3339]     | A date-time describing the actual  |
   |              | date-time     | or expected starting time of the   |
   |              |               | object.  When used within an       |
   |              |               | Activity object, for instance, the |
   |              |               | "startTime" specifies the moment   |
   |              |               | the activity began or is scheduled |
   |              |               | to begin.                          |
   | "endTime"    | [RFC3339]     | A date-time describing the actual  |
   |              | date-time     | or expected ending time of the     |
   |              |               | object.  When used within an       |
   |              |               | Activity object, for instance, the |
   |              |               | "endTime" specifies the moment the |
   |              |               | activity concluded or is scheduled |
   |              |               | to conclude.                       |
   | "rating"     | Decimal       | A quality rating expressed as a    |
   |              | Number        | number between 1.0 and 5.0         |
   |              | between 1.0   | (inclusive) with one decimal place |
   |              | and 5.0       | of precision.                      |





Snell                                                          [Page 14]

                             ActivityStreams                    May 2013


   | "tag"        | Link          | A Link (Section 3.3) value         |
   |              | (Section 3.3) | referencing one or more resources  |
   |              | value         | that are loosely associated with   |
   |              |               | the containing object.  The "tag"  |
   |              |               | and "attachment" properties differ |
   |              |               | from one another in that the "tag" |
   |              |               | property asserts "association by   |
   |              |               | reference" while "attachment"      |
   |              |               | asserts "association by            |
   |              |               | enclosure".                        |
   | "duration"   | JSON          | When the object describes a        |
   |              | [RFC4627] int | time-based resource, such as audio |
   |              |               | or video, the "duration" property  |
   |              |               | indicates the approximate length   |
   |              |               | of time in seconds.                |
   | "height"     | JSON          | When the object describes a visual |
   |              | [RFC4627] int | resource, such as an image, video  |
   |              |               | or embeddable HTML page, the       |
   |              |               | "height" property indicates the    |
   |              |               | recommended display height in      |
   |              |               | pixels.                            |
   | "width"      | JSON          | When the object describes a visual |
   |              | [RFC4627] int | resource, such as an image, video  |
   |              |               | or embeddable HTML page, the       |
   |              |               | "width" property indicates the     |
   |              |               | recommended display width in       |
   |              |               | pixels.                            |
   +--------------+---------------+------------------------------------+

3.6.  Collection

   Collection objects are a specialization of the base Object
   (Section 3.1) that contain a listing of other objects (Section 3.1)
   The Collection object is used primarily as the root of an Activity
   Streams document as described in Section 4, but can be used as the
   value of object properties.

   Collections have both a logical model and a physical serialization.
   While the logical view of a collection might contain a large number
   of objects, any single serialized representation might include only a
   subset of those objects, with specific Link (Section 3.3) values used
   to reference additional serialized representations that include
   additional subsets.  Such representations are known as "multi-page
   collections", with each serialized subset representing a single
   "page".

   The value of the Collection object's "@type" property MUST be
   "collection" unless the fact that the object is a collection can be



Snell                                                          [Page 15]

                             ActivityStreams                    May 2013


   determined by context.

   Collection objects extend the core object (Section 3.1) definition
   with the following additional properties:

   +----------------+---------------+----------------------------------+
   | Property       | Value         | Description                      |
   +----------------+---------------+----------------------------------+
   | "totalItems"   | Integer       | Non-negative integer specifying  |
   |                |               | the total number of objects      |
   |                |               | contained by the logical view of |
   |                |               | the collection.  This number     |
   |                |               | might not reflect the actual     |
   |                |               | number of items serialized       |
   |                |               | within the Collection object     |
   |                |               | instance.                        |
   | "items"        | Array of      | An array containing a listing of |
   |                | Objects       | Objects (Section 3.1) of any     |
   |                | (Section 3.1) | type.                            |
   | "itemsAfter"   | [RFC3339]     | A RFC 3339 date-time that        |
   |                | date-time     | indicates that the collection    |
   |                |               | contains only items published or |
   |                |               | updated strictly after the date  |
   |                |               | and time specified.              |
   | "itemsBefore"  | [RFC3339]     | A RFC 3339 date-time that        |
   |                | date-time     | indicates that the collection    |
   |                |               | contains only items published or |
   |                |               | updated strictly before the date |
   |                |               | and time specified.              |
   | "itemsPerPage" | Integer       | A non-negative integer           |
   |                |               | specifying the maximum number of |
   |                |               | items that will be included in   |
   |                |               | the value of the items array.    |
   | "startIndex"   | Integer       | A non-negative integer value     |
   |                |               | identifying the relative         |
   |                |               | position within the logical view |
   |                |               | of collection of the first       |
   |                |               | object contained in the items    |
   |                |               | property.  For instance, if      |
   |                |               | there are 20 items that are      |
   |                |               | considered to be members of a    |
   |                |               | collection, but only the last 10 |
   |                |               | of those items are included in   |
   |                |               | the items property, the value of |
   |                |               | startIndex would be 10.          |






Snell                                                          [Page 16]

                             ActivityStreams                    May 2013


   | "first"        | Link          | A Link (Section 3.3) value       |
   |                | (Section 3.3) | referencing the furthest         |
   |                | value         | preceeding page of a multi-page  |
   |                |               | collection.                      |
   | "last"         | Link          | A Link (Section 3.3) value       |
   |                | (Section 3.3) | referencing the furthest         |
   |                | value         | following page of a multi-page   |
   |                |               | collection.                      |
   | "prev"         | Link          | A Link (Section 3.3) value       |
   |                | (Section 3.3) | referencing the immediately      |
   |                | value         | preceding page of the multi-page |
   |                |               | collection.  Note that the       |
   |                |               | property name previous can be    |
   |                |               | used as an equivalent            |
   |                |               | alternative; however             |
   |                |               | implementations SHOULD use prev  |
   |                |               | and MUST NOT use both prev AND   |
   |                |               | previous within the same         |
   |                |               | collection.                      |
   | "next"         | Link          | A Link (Section 3.3) value       |
   |                | (Section 3.3) | referencing the immediately      |
   |                | value         | following page of the multi-page |
   |                |               | collection.                      |
   | "current"      | Link          | A Link (Section 3.3) value       |
   |                | (Section 3.3) | referencing the page containing  |
   |                | value         | the items that have been updated |
   |                |               | or published most recently.      |
   | "self"         | Link          | A Link (Section 3.3) value       |
   |                | (Section 3.3) | referencing this page.           |
   |                | value         |                                  |
   +----------------+---------------+----------------------------------+


4.  The Activity Stream JSON Document

   The above defined JSON serialization can be used to represent
   activities, objects and media links in any context.  This section
   defines one particular use of the above formats to publish a JSON
   document representing a stream of activities.

   Publishers using this format MUST produce a valid JSON document whose
   root value is a Collection (Section 3.6).

   The MIME media type of this document MUST be "application/
   activity+json".






Snell                                                          [Page 17]

                             ActivityStreams                    May 2013


5.  Comparison of Identifier Values

   The values of multiple Object (Section 3.1) and Link (Section 3.3)
   value's "@id" properties can be compared to determine if the objects
   represent duplicate content.  Processors MUST compare these values on
   a character-by-character, case-sensitive basis.  Comparison
   operations MUST be based solely on the IRI character strings and MUST
   NOT rely on dereferencing the IRIs or URIs mapped from them.

   As a consequence, two IRIs that resolve to the same resource but are
   not character-for-character identical will be considered different
   for the purposes of identifier comparison.  In such cases, the
   "duplicates" property can be used to expressly relate such objects to
   one another.


6.  Extensibility

   Processors that encounter unfamiliar properties within any Activity
   Streams object MUST NOT stop processing or signal an error and MUST
   continue processing the items as if those properties were not
   present.


7.  Security Considerations

   Publishers or Consumers implementing Activity Streams as a stream of
   public data may also want to consider the potential for unsolicited
   commercial or malicious content and should take preventative measures
   to recognize such content and either identify it or not include it in
   their implementations.

   Publishers should take reasonable measures to make sure potentially
   malicious user input such as cross-site scripting attacks are not
   included in the Activity Streams data they publish.

   Consumers that re-emit ingested content to end-users MUST take
   reasonable measures if emitting ingested content to make sure
   potentially malicious ingested input is not re-emitted.

   Consumers that re-emit ingested content for crawling by search
   engines should take reasonable measures to limit any use of their
   site as a Search Engine Optimization loophole.  This may include
   converting un-trusted hyperlinks to text or including a
   rel="nofollow" attribute.

   Consumers should be aware of the potential for spoofing attacks where
   the attacker publishes activities or objects with falsified property



Snell                                                          [Page 18]

                             ActivityStreams                    May 2013


   values with the intent of injecting malicious content, hiding or
   corrupting legitimate content, or misleading users.

   Activity Streams are JSON Documents and are subject to the same
   security considerations described in [RFC4627].

   Activity Streams implementations handle URIs.  See Section 7 of
   [RFC3986].

   Activity Streams implementations handle IRIs.  See Section 8 of
   [RFC3987].


8.  IANA Considerations

   None.


9.  License

   As of [date], the following persons or entities have made this
   Specification available under the Open Web Foundation Agreement
   Version 1.0, which is available at
   <http://www.openwebfoundation.org/legal/>.

      [List of persons or entities]

   You can review the signed copies of the Open Web Foundation Agreement
   Version 1.0 for this Specification at
   <http://activitystrea.ms/licensing/>, which may also include
   additional parties to those listed above.

   Your use of this Specification may be subject to other third party
   rights.  THIS SPECIFICATION IS PROVIDED "AS IS."  The contributors
   expressly disclaim any warranties (express, implied, or otherwise),
   including implied warranties of merchantability, non-infringement,
   fitness for a particular purpose, or title, related to the
   Specification.  The entire risk as to implementing or otherwise using
   the Specification is assumed by the Specification implementer and
   user.  IN NO EVENT WILL ANY PARTY BE LIABLE TO ANY OTHER PARTY FOR
   LOST PROFITS OR ANY FORM OF INDIRECT, SPECIAL, INCIDENTAL, OR
   CONSEQUENTIAL DAMAGES OF ANY CHARACTER FROM ANY CAUSES OF ACTION OF
   ANY KIND WITH RESPECT TO THIS SPECIFICATION OR ITS GOVERNING
   AGREEMENT, WHETHER BASED ON BREACH OF CONTRACT, TORT (INCLUDING
   NEGLIGENCE), OR OTHERWISE, AND WHETHER OR NOT THE OTHER PARTY HAS
   BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.





Snell                                                          [Page 19]

                             ActivityStreams                    May 2013


10.  References

10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3339]  Klyne, G., Ed. and C. Newman, "Date and Time on the
              Internet: Timestamps", RFC 3339, July 2002.

   [RFC3986]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
              Resource Identifier (URI): Generic Syntax", STD 66,
              RFC 3986, January 2005.

   [RFC3987]  Duerst, M. and M. Suignard, "Internationalized Resource
              Identifiers (IRIs)", RFC 3987, January 2005.

   [RFC4627]  Crockford, D., "The application/json Media Type for
              JavaScript Object Notation (JSON)", RFC 4627, July 2006.

   [RFC5646]  Phillips, A. and M. Davis, "Tags for Identifying
              Languages", BCP 47, RFC 5646, September 2009.

   [RFC5988]  Nottingham, M., "Web Linking", RFC 5988, October 2010.

   [W3C.WD-json-ld-20130411]
              Sporny, M., Kellogg, G., and M. Lanthaler, "JSON-LD 1.0",
              World Wide Web Consortium LastCall WD-json-ld-20130411,
              April 2013,
              <http://www.w3.org/TR/2013/WD-json-ld-20130411>.

10.2.  Informational References

   [RFC6963]  Saint-Andre, P., "A Uniform Resource Name (URN) Namespace
              for Examples", BCP 183, RFC 6963, May 2013.


Appendix A.  Acknowledgements

   The authors wish to thank the Activity Streams community and
   implementers for their support, encouragement, and enthusiasm
   including but not limited to: Abdul Qabiz, Adina Levin, Adrian Chan,
   Adriana Javier, Alan Hoffman, Alex Kessinger, Alexander Ovchinnikov,
   Alexander Zhuravlev, Alexandre Loureiro Solleiro, Amy Walgenbach,
   Andres Vidal, Angel Robert Marquez, Ari Steinberg, Arjan
   Scherpenisse, Arne Roomann-Kurrik, Beau Lebens, Ben Hedrington, Ben
   Metcalfe, Ben Werdmuller, Benjamin Goering, Bill de hOra, Bo Xing,
   Bob Aman, Bob Wyman, Brett Slatkin, Brian Walsh, Brynn Evans, Charlie



Snell                                                          [Page 20]

                             ActivityStreams                    May 2013


   Cauthen, Chris Chabot, Chris Toomey, Christian Crumlish, Dan
   Brickley, Dan Scott, Daniel Chapman, Danny Ayers, Dare Obasanjo,
   Darren Bounds, David Cramer, David Nelson, David Recordon, DeWitt
   Clinton, Douglas Pearce, Ed Summers, Elias Bizannes, Elisabeth
   Norris, Eric Marcoullier, Eric Woods, Evan Prodromou, Gee-Hsien
   Chuang, Greg Biggers, Gregory Foster, Henry Saputra, Hillary Madsen,
   Howard Liptzin, Hung Tran, Ian Kennedy, Ian Mulvany, Ivan Pulleyn,
   Jacob Kim, James Falkner, James Pike, James Walker, Jason Kahn, Jason
   Kantz, Jeff Kunins, Jeff Martin, Jian Lin, Johannes Ernst, John
   Panzer, Jon Lebkowsky, Jon Paul Davies, Jonathan Coffman, Jonathan
   Dugan, Joseph Boyle, Joseph Holsten, Joseph Smarr, Josh Brewer, Jud
   Valeski, Julien Chaumond, Julien Genestoux, Jyri Engestroem, Kaliya
   Hamlin, Kevin Marks, Laurent Eschenauer, Laurie Voss, Leah Culver,
   Libby Miller, Manu Mukerji, Mark Weitzel, Marko Degenkolb, Marshall
   Kirkpatrick, Martin Svensson, Marty Alchin, Mary Hoder, Matt Leventi,
   Matt Wilkinson, Matthias Mueller-Prove, Max Engel, Max Wegmueller,
   Melvin Carvalho, Michael Buckbee, Michael Chan, Michael Richardson,
   Michael Sullivan, Mike Macgirvin, Mislav Marohni&#263;, Mo Jangda,
   Nate Benes, NeilFred Picciotto, Nick Howard, Nick Lothian, Nissan
   Dookeran, Nitya Narasimhan, Pablo Martin, Padraic Brady, Pat G.
   Cappalaere, Patrick Aljord, Peter Ferne, Peter Reiser, Peter Saint-
   Andre, Phil Wolff, Philip (flip) Kromer, Richard Cunningham, Richard
   Zhao, Rick Severson, Robert Hall, Robert Langbert, Robin Cover, Ryan
   Boyd, Sam Sethi, Scott Raymond, Scott Seely, Simon Grant, Simon
   Wistow, Stephen Garcia, Stephen Sisk, Stephen Paul Weber, Steve Ivy,
   Steve Midgley, Steven Livingstone-Perez, Sylvain Carle, Sylvain
   Hellegouarch, Tantek Celik, Tatu Saloranta, Tim Moore, Timothy Young,
   Todd Barnard, Tosh Meston, Tyler Gillies, Zach Copley, and Zach
   Shepherd.


Author's Address

   James M Snell
   IBM
















Snell                                                          [Page 21]
